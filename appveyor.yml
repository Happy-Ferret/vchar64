clone_depth: 200

environment:
  matrix:
    - QTDIR: C:\Qt\5.9.5\msvc2013_64
      PYTHONHOME: C:\Python36-x64
      PUSH_RELEASE: true
      TILED_ITCH_CHANNEL: windows-64bit
    - QTDIR: C:\Qt\5.9.5\mingw53_32
      PYTHONHOME: C:\Python36
      MINGW: C:\Qt\Tools\mingw530_32
      PUSH_RELEASE: true
      TILED_ITCH_CHANNEL: windows-32bit

configuration: Release

install:
  - set PATH=%PATH%;%QTDIR%\bin;%MINGW%\bin

build_script:
  - FOR /F "tokens=*" %%i in ('git describe') do SET COMMITNOW=%%i
  - if defined APPVEYOR_REPO_TAG_NAME set VERSION=%APPVEYOR_REPO_TAG_NAME:~1%
  - if defined APPVEYOR_REPO_TAG_NAME set BUILD_INFO_VERSION=%VERSION%
  - if defined APPVEYOR_REPO_TAG_NAME echo Building VChar64 %VERSION%... (from %COMMITNOW%)
  - if not defined APPVEYOR_REPO_TAG_NAME set VERSION=%DATE:~10,4%-%DATE:~4,2%-%DATE:~7,2%
  - if not defined APPVEYOR_REPO_TAG_NAME set BUILD_INFO_VERSION=%COMMITNOW%
  - if not defined APPVEYOR_REPO_TAG_NAME echo Building VChar64 daily %VERSION%... (from %COMMITNOW%)
  - qmake
  - mingw32-make

